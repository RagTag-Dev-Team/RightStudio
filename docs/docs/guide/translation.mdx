# Translation (i18n)

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

## Overview

We're using [react-i18next](https://react.i18next.com/) for the translation. You can find its configurations in `src/configs/i18n.ts` file and the locales in the `src/data/translation/locales` folder in the full version.

:::note
We provide i18n for the navigation only. You may add more translations for your project.
:::

## Add i18n

:::caution
Only for those who are using the **starter-kit**.
:::

If you are using the full version, then you don't need to add i18n as it is already available in that version. But if you are using the starter-kit (which is recommended) and want to add i18n, then follow these steps:

1. Install the required dependencies:
  <Tabs>
  <TabItem value='pnpm' label='pnpm'>

  ```bash
  pnpm add i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  <TabItem value='yarn' label='yarn'>

  ```bash
  yarn add i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  <TabItem value='npm' label='npm'>

  ```bash
  npm install i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  </Tabs>

2. Copy the following from the full version and paste them under the same directory in your project:
    - `src/configs/i18n.ts` file
    - `src/data/translation` folder
    - `getLanguage` and `getDirection` functions from the `src/utils/commonUtils.ts` file

3. Add the following in the `src/app/layout.tsx` as it is in the full version:
    - `import I18n from '@/comfigs/i18n'` import statement
    - replace `import { getDirection } from '@/utils/commonUtils'` import statement with `import { getLanguage, getDirection } from '@/utils/commonUtils'` import statement
    - `const lang = getLanguage()` variable
    - `<I18n lang={lang} />` component

4. If you are using the **Customizer**, then add the following in the `src/app/(dashboard)/layout.tsx` file as it is in the full version:
    - `import { getDirection } from '@/utils/commonUtils'` import statement
    - `import { langDirection } from '@/data/translation/langDirection'` import statement
    - `const dir = getDirection()` variable
    - `<Customizer dir={dir} langDirection={langDirection} />` component

5. If you want to add the language dropdown in the navbar, then add the following as it is the full version:
    - `src/components/layout/shared/Translation.tsx` file
    - `import Translation from '@components/layout/shared/Translation'` import statement in the `src/components/layout/horizontal/NavbarContent.tsx` and `src/components/layout/vertical/NavbarContent.tsx` files
    - `<Translation />` component in the `src/components/layout/horizontal/NavbarContent.tsx` and `src/components/layout/vertical/NavbarContent.tsx` files

That's it! Now you can use i18n in your project. You may refer to the [usage](#usage) section to use it.

## Add/Remove a Language

:::caution
If you are using the **starter-kit**, you need to add i18n into your project manually before using it. Please refer to [this](#add-i18n) section to add it to your project.
:::

Suppose you want to add `de` (German) language and remove `fr` (French) language. For that, follow these steps:

1. Remove the `src/data/translation/locales/fr.json` file and add the `src/data/translation/locales/fr.json` file. You need to keep the format of the file as it is in other locale files
2. Update the following in the `src/configs/i18n.ts` file:
    ```diff
    - import fr from '@/data/translation/locales/fr.json'
    + import de from '@/data/translation/locales/de.json'

    - fr: { translation: fr },
    + de: { translation: de },
    ```
3. Update the following in the `src/data/translation/langDirection.ts` file:
    ```diff
    - fr: 'ltr',
    + de: 'ltr',
    ```

    :::info
    In the `src/data/translation/langDirection.ts` file, you need to add the language code as the key and the direction of the language as the value. For example, if you add `de` language, the language script has `ltr` direction; so you need to add `de: 'ltr'` but if you add `ar` language, the language script has `rtl` direction; so you need to add `ar: 'rtl'`.

    If you pass a wrong direction to a language, then the language will be updated properly but will have the wrong direction which will not match the language script.
    :::
4. Update the following in the `src/components/layout/shared/Translation.tsx` file:
    <Tabs>
    <TabItem value='tsx' label='TSX'>

    ```diff
    - async (language: 'en' | 'fr' | 'ar'): Promise<void> => {
    + async (language: 'en' | 'de' | 'ar'): Promise<void> => {
      await i18n.changeLanguage(language)
    }

    - <a onClick={() => handleLangItemClick('fr')}>French</a>
    + <a onClick={() => handleLangItemClick('de')}>German</a>
    ```

    </TabItem>
    <TabItem value='js' label='JS'>

    ```diff
    - <a onClick={() => handleLangItemClick('fr')}>French</a>
    + <a onClick={() => handleLangItemClick('de')}>German</a>
    ```

    </TabItem>
    </Tabs>

## Usage

:::caution
If you are using the **starter-kit**, you need to add i18n into your project manually before using it. Please refer to [this](#add-i18n) section to add it to your project.
:::

Please make sure that you have i18n configured in your project before using it. Please follow the below steps to use it:

1. Add the locales to your project like the following:
  ```json
  // src/data/translation/locales/en.json
  {
    "Hello World": "Hello World"
  }
  ```

  ```json
  // src/data/translation/locales/fr.json
  {
    "Hello World": "Bonjour le monde"
  }
  ```

  ```json
  // src/data/translation/locales/ar.json
  {
    "Hello World": "مرحبا بالعالم"
  }
  ```
2. Import the `useTranslation` hook from `react-i18next` in the component you want to use it in:
  ```tsx
  import { useTranslation } from 'react-i18next'
  ```
3. Use the `useTranslation` hook in your component like the following:
  ```tsx
  import { useTranslation } from 'react-i18next'

  // If you are using the Customizer and want to change the direction of the page
  // according to the language, then consider importing the following:
  import { useEffect } from 'react'
  import { useCookie } from 'react-use'
  import useSettings from '@core/hooks/useSettings'
  import { langDirection } from '@/data/translation/langDirection'

  const SomeComponent = () => {
    const { t, i18n } = useTranslation()

    // If you are using the Customizer and want to change the direction of the page
    // according to the language, then consider using the following code:
    const { updateSettings } = useSettings()
    const [value, updateCookie] = useCookie('lang')
    const direction = langDirection[i18n.language]
    useEffect(() => {
      document.documentElement.setAttribute('lang', i18n.language)
      document.documentElement.setAttribute('dir', direction || 'ltr')
      updateCookie(i18n.language)
      updateSettings({ languageForCustomizer: i18n.language })
    }, [i18n.language])

    return (
      <div>
        <h1>{t('Hello World')}</h1>
        <button onClick={() => i18n.changeLanguage('en')}>Translate to English</button>
        <button onClick={() => i18n.changeLanguage('fr')}>Translate to French</button>
        <button onClick={() => i18n.changeLanguage('ar')}>Translate to Arabic</button>
      </div>
    )
  }
  ```
  Here, we're using the `t` function to translate some text and the `i18n.changeLanguage` function to change the language. Please refer to the [official documentation](https://react.i18next.com/latest/usetranslation-hook) on the `useTranslation` hook for more information.

## i18n Configuration Options

You can configure the i18n options in the `src/configs/i18n.ts` file. You may refer to all configurations from [here](https://www.i18next.com/overview/configuration-options).

:::tip
If you are changing a language in the `resources` option in the above mentioned file, then we insist you to follow [this](#addremove-a-language) guide.
:::

## Get current Language & Direction

### Server Side Component

If you want to get the current language and direction in a server side component, then you can use the `getLanguage` and `getDirection` functions respectively from the `src/utils/commonUtils.ts` file.

:::caution
These functions are created for the server side components only. If you call them in a client side component, then you will get an error.
:::

#### getLanguage

This function is used to get the current language inside a server side component. You may use it like the following:

```tsx
import { getLanguage } from '@/utils/commonUtils'

const SomeComponent = () => {
  const lang = getLanguage()
  console.log(lang) // en, fr, ar, etc.
  
  // ...
}
```

#### getDirection

This function is used to get the current direction inside a server side component. You may use it like the following:

```tsx
import { getDirection } from '@/utils/commonUtils'

const SomeComponent = () => {
  const dir = getDirection()
  console.log(dir) // ltr, rtl
  
  // ...
}
```

### Client Side Component

If you want to get the current language and direction in a client side component, then you can use the `useCookie` hook from `react-use` and the `langDirection` object from `src/data/translation/langDirection.ts` file.

#### useCookie

This hook is used to get the current language inside a client side component. You may use it like the following:

```tsx
'use client'

import { useCookie } from 'react-use'

const SomeComponent = () => {
  const [value] = useCookie('lang')
  console.log(value) // en, fr, ar, etc.
  
  // ...
}
```

#### langDirection

This object is used to get the current direction inside a client side component. You may use it like the following:

```tsx
'use client'

import { useCookie } from 'react-use'
import { langDirection } from '@/data/translation/langDirection'

const SomeComponent = () => {
  const [value] = useCookie('lang')
  const dir = langDirection[value]
  console.log(dir) // ltr, rtl
  
  // ...
}
```

## Remove i18n

:::caution
Only for those who are using the **full version**.
:::

:::warning Important!
If you remove our translation and wants to add your own translation along with RTL support, then you need to pass the direction in the `dir` attribute in the `<html>` tag in the `src/app/layout.tsx` file.
:::

If you are using the starter-kit, then you don't need to remove i18n as it is not available in that version. But if you are using the full version and want to remove i18n, then follow these steps:

1. Remove the following dependencies:
  <Tabs>
  <TabItem value='pnpm' label='pnpm'>

  ```bash
  pnpm remove i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  <TabItem value='yarn' label='yarn'>

  ```bash
  yarn remove i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  <TabItem value='npm' label='npm'>

  ```bash
  npm uninstall i18next react-i18next i18next-browser-languagedetector
  ```

  </TabItem>
  </Tabs>
2. Remove the following:
    - `src/configs/i18n.ts` file
    - `src/data/translation` folder
    - `getLanguage` and `getDirection` functions from the `src/utils/commonUtils.ts` file. If there is nothing else in this file, then you may remove this file
3. Remove the following from the `src/app/layout.tsx` file:
    - `import I18n from '@/comfigs/i18n'` import statement
    - replace `import { getLanguage, getDirection } from '@/utils/commonUtils'` import statement with `import { getDirection } from '@/utils/commonUtils'` import statement
    - `const lang = getLanguage()` variable
    - `<I18n lang={lang} />` component
4. If you are using the **Customizer**, then remove the following from the `src/app/(dashboard)/layout.tsx` file:
    - `import { getDirection } from '@/utils/commonUtils'` import statement
    - `import { langDirection } from '@/data/translation/langDirection'` import statement
    - `const dir = getDirection()` variable
    - `<Customizer dir={dir} langDirection={langDirection} />` component
5. If you have the language dropdown in the navbar, then remove the following:
    - `src/components/layout/shared/Translation.tsx` file
    - `import Translation from '@components/layout/shared/Translation'` import statement in the `src/components/layout/horizontal/NavbarContent.tsx` and `src/components/layout/vertical/NavbarContent.tsx` files
    - `<Translation />` component in the `src/components/layout/horizontal/NavbarContent.tsx` and `src/components/layout/vertical/NavbarContent.tsx` files
6. Make sure that you have removed all the imports related to the `i18next` libraries from your project and also their usages

That's it! Now you have removed i18n from your project.
